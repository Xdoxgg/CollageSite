<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Моя страница</title>

    <link rel="stylesheet" href="/Styles/main.css">
    <link rel="stylesheet" href="/Styles/infoPage.css">

</head>
<body>
<div class="main-panel">
    <div class="preview-panel">
        <div id="pageTitle"></div>
    </div>
    <div class="content" id="content"></div>

</div>
</body>
<script>
    function main() {
        const urlParams = new URLSearchParams(window.location.search);
        const pageId = urlParams.get('data_id');
        getDataById(pageId)

    }

    async function getDataById(id) {

        try {

            const response = await fetch('/api/info_data?data_id=' + encodeURIComponent(id), {
                method: 'GET',
            });
            if (!response.ok) {
                throw new Error('Ошибка запроса: ' + response.statusText);
            }


            const data = await response.json();
            alert(JSON.stringify(data))
            document.title = data.name
            let el = document.getElementById('pageTitle')
            el.textContent = data.name
            let mainEl = document.getElementById('content')
            mainEl.innerHTML = data.innerHTML;
        } catch (error) {
            console.error('Ошибка:', error);
            alert('Ошибка: ' + error.message);
        }
    }


    document.addEventListener('DOMContentLoaded', (event) => {
        main();
    });

</script>
</html>